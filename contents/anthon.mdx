---
title: Anthon 软件仓库镜像使用帮助
cname: 'anthon'
---

AOSC OS （曾用名：Anthon OS）是一个由[安同开源社区](https://aosc.io) 开发并维护的半滚动 Linux 发行版，以简化精制为发行目标。

AOSC OS 及其 Retro 变种对多种处理器架构提供支持，但部分镜像站仅对其中的一个或多个架构进行同步。请在替换前确认目标镜像站的同步情况。

### 自动替换

AOSC OS 内置 `apt-gen-list` 工具来切换社区提供的可用镜像源。

列出可用镜像源，执行：

<CodeBlock>
```bash
{{sudo}}apt-gen-list list-mirrors
```
</CodeBlock>

要启用某一镜像源，执行：

<CodeBlock>
```bash
{{sudo}}apt-gen-list add-mirror <mirror>
```
</CodeBlock>

其中 `{mirror}` 替换为所列出的简称。

要仅启用某一源，执行：

<CodeBlock>
```bash
{{sudo}}apt-gen-list set-mirror <mirror>
```
</CodeBlock>

其中 `<mirror>` 替换为所列出的简称。

关于 `apt-gen-list` 的语义和详细用法，请执行 `apt-gen-list help` 查看帮助。

### 手动修改

修改 `/etc/apt/sources.list`，内容为

<CodeBlock
  enableQuickSetup
  filepath="/etc/apt/sources.list"
>

```properties
deb {{http_protocol}}{{mirror}}/debs stable main
```

</CodeBlock>

然后执行 `apt update` 以更新软件包缓存。

### 系统镜像

<CodeBlock>
```
{{http_protocol}}{{mirror}}/aosc-os/os-<arch>
```
</CodeBlock>

除 livekit 以外的镜像均为 rootfs，以 squashfs 和 xz tarball `.tar.xz` 的形式提供，可以通过 `unsquashfs` 或 `tar --numeric-owner xv` 等方式解压后使用。
访问 https://wiki.aosc.io/aosc-os/installation/manual/ 以阅读手动安装指引。

### 测试软件包

AOSC OS 使用了 Topics[^1] 以管理处于测试状态的软件包。系统内置了 `atm` 工具以自动管理测试 Topics 的参与，相关配置文件位于 `/etc/apt/sources.list.d/atm.list`。

然而需要注意的是，目前 `atm` 并不会自动替换软件源至指定的镜像。若需要替换镜像则需要用户手动对配置文件进行编辑，或使用以下命令替换：

<CodeBlock>
```
{{sudo}}sed "s|https://repo.aosc.io|{{http_protocol}}{{mirror}}|g" --in-place /etc/apt/sources.list.d/atm.list
```
</CodeBlock>

部分镜像站仅对稳定分支（即 `stable`）进行同步，请在替换前确认目标镜像站的同步情况。

---

[^1]: [AOSC OS Topic-Based Maintenance Guidelines](https://wiki.aosc.io/developer/packaging/topic-based-maintenance-guideline/)
